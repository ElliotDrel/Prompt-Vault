# Phase 15.1: Visibility Filter Persistence - Context

## Vision

A unified filter and sort system using filter chips that integrates with the existing filter area. Users can filter and sort prompts on both Dashboard and Library pages, with preferences persisted to the database.

## How It Works

### Filter Chips UI
- Filter chips integrate with the existing filter/search area (not separate tabs or dropdowns)
- Chips feel like one cohesive filtering system
- Applied to both Dashboard and Library pages

### Filters
1. **Visibility Filter**
   - Options: All | Public | Private
   - Default: All (show everything)

2. **Author Filter**
   - Options: All | Mine | Others
   - Useful on Library page to distinguish your public prompts from community prompts
   - On Dashboard, this may be less relevant (all prompts are yours)

### Sorts
1. **Recently Updated** (keep existing behavior)
2. **Date Created** (newest/oldest first)
3. **Most Used** (by times copied)

### Persistence
- Store filter/sort preferences in `user_settings` table
- Preferences apply across sessions and devices
- New users default to "All" visibility

## What's Essential

- Filter chips that visually integrate with existing UI
- Visibility filter (public/private/all) working on both pages
- Author filter (mine/others/all) for Library page
- Three sort options functional
- Preferences persisted to database
- Default "All" for new users

## What's Out of Scope

- Tags/categories system (future phase)
- Date range filtering (sorting by date is included, but no "last 7 days" type filter)
- Advanced text search improvements (existing search stays as-is)
- Per-page separate preferences (single preference set applies everywhere)

## Technical Notes

- Library page shows all public prompts (yours and others')
- Dashboard shows only your prompts
- Filter behavior may differ slightly between pages based on context
- `user_settings` table already exists for `time_saved_multiplier` - extend for filter preferences

## Prerequisites

**UAT-011 (Critical):** The `/library/prompt/:promptId` route is missing - clicking any prompt card in the Public Library results in a 404. This must be resolved before Phase 15.1 work begins, as it affects the Library page this phase will modify. See `.planning/phases/15-public-library-page/15-UAT-ISSUES.md` and `.planning/STATE.md` for options.

## Resolved Questions

- **Author filter on Dashboard:** Hidden - Dashboard only shows user's own prompts, so author filter is meaningless there.
- **Chip styling:** Use rounded-full buttons with default/outline variants (see RESEARCH.md).
- **URL query params:** Supported via useURLFilterSync pattern - filters sync to URL for shareable views.
- **Issue 10 (Author click):** RESOLVED - Author names are display-only text (no click action). Mine/Others filter chips provide sufficient author filtering without needing a specific authorId filter.
