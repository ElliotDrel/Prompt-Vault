# Phase 15.3: Public Prompt Detail Page - Context

**Gathered:** 2026-01-30
**Status:** Ready for planning

<domain>
## Phase Boundary

Add `/library/prompt/:promptId` route with full-featured public prompt detail page to resolve UAT-011 critical 404 bug. Users can interact with public prompts the same way they interact with owned prompts on Dashboard.

</domain>

<decisions>
## Implementation Decisions

### Architecture Pattern
- **Thin wrapper approach**: PublicPromptView.tsx wraps shared PromptView logic
- PublicPromptView adds public-specific UI (future: fork button, community stats)
- PromptView stays focused on core prompt display/interaction
- One source of truth for prompt logic, composition for context-specific features

### Page Layout & Content
- Mirror PromptView layout — same functionality as Dashboard
- Users can fill variables, copy, use prompts (not read-only)
- Use current author info behavior (whatever Library cards already show)
- Globe emoji indicator everywhere to distinguish public prompts
- Show all stats that Dashboard shows (usage tracking deferred to Phase 18)

### Actions & Permissions
- **Hide for non-owners**: Edit button, Delete button
- **Show for all**: Pin, Copy, variable inputs
- **Version history**: Only visible for prompts YOU own
- Add UI note on version history: "This is your version history — only you can see it"
- Copy events appear in the COPIER's history (the person who copied, not the prompt owner)

### Navigation Flow
- Back button navigates to `/library` (matches Dashboard → `/dashboard` pattern)
- Both routes work for public prompts you own:
  - `/dashboard/prompt/:id` — Your workspace view (full edit control)
  - `/library/prompt/:id` — Community view (how others see it)

### Owner Viewing Own Public Prompt via Library
- Show prompt exactly as others see it (community view, no edit buttons)
- Display banner: "You're viewing this as others see it"
- Include button: "View in Dashboard" → navigates to `/dashboard/prompt/:id`

### Dashboard View of Public Prompt (Symmetry)
- Add "View Public Version" button on Dashboard for public prompts
- Button navigates to `/library/prompt/:id`
- Enables easy switching between workspace and community perspective

### Error States
- Deleted prompt: 404 page with message + link back to Library
- Private prompt (via direct URL): Same 404 — don't reveal whether prompt exists
- User's copy history preserved even if source prompt becomes private/deleted

### Claude's Discretion
- Exact banner/notice styling for "viewing as others see it"
- Button placement and styling for cross-view navigation
- 404 page layout and messaging details

</decisions>

<specifics>
## Specific Ideas

- "The Library should act the exact same way as Dashboard except for public prompts"
- Same set of files, one source of truth — thin wrapper for composition, not duplication
- Version history is private — add explicit note so users understand only they see it

</specifics>

<deferred>
## Deferred Ideas

- Platform-wide usage statistics (community usage counts) — Phase 18: Cross-Platform Metrics
- User profiles with display names — separate phase
- Fork button — Phase 17: Fork

</deferred>

---

*Phase: 15.3-public-prompt-detail-page*
*Context gathered: 2026-01-30*
