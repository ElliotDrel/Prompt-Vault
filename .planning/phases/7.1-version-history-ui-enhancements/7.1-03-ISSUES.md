# UAT Issues: Phase 7.1 Plan 03

**Tested:** 2026-01-11
**Source:** .planning/phases/7.1-version-history-ui-enhancements/7.1-03-PLAN.md
**Tester:** User via /gsd:verify-work

## Open Issues

### UAT-001: Version count includes "Current" showing "2 versions" when only 1 saved version exists

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Major
**Feature:** Version list header
**Description:** The version count says "2 versions total" but there's only 1 saved version (Version 1). The count incorrectly includes "Current" as a version.
**Expected:** Should show "1 version total" (count only saved snapshots)
**Actual:** Shows "2 versions total"

### UAT-002: "Compare to Previous" button available for Version 1 which has no previous

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Major
**Feature:** Comparison mode toggle
**Description:** Version 1 is the first version - it has no previous version to compare to. But the "Compare to Previous" button is still enabled and shows confusing results.
**Expected:** "Compare to Previous" should be disabled or hidden when viewing Version 1
**Actual:** Button is enabled, shows meaningless comparison

### UAT-003: Revert button shown for Version 1 when Current matches Version 1

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Major
**Feature:** Revert button
**Description:** When selecting Version 1 and it's identical to Current, the Revert button is still shown. You can't revert to what you already have.
**Expected:** Revert button should be hidden/disabled when the selected version matches Current state
**Actual:** Revert button always shown for all historical versions

### UAT-004: Version 1 showing false diff when comparing to Current

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Major
**Feature:** Diff display
**Description:** Version 1 shows "+1 word -1 word" changes when in "Compare to Current" mode, but if there have been no edits since Version 1 was created, there should be no diff.
**Expected:** No diff shown when Version 1 content matches Current
**Actual:** Shows phantom changes (strikethrough highlighting visible)

### UAT-005: "Current" entry creates illusion of 2 distinct versions when there's only 1

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Major
**Feature:** Version list timeline
**Description:** The version list shows "Current (Live)" as a separate entry above "Version 1", making it look like there are 2 versions. This is conceptually confusing - Current IS Version 1 if no edits have been made.
**Expected:** When Current matches the latest version, don't show them as separate entries OR clearly indicate they're the same
**Actual:** Shows both as separate entries with no indication they're identical

### UAT-006: Historical version detail view missing revert tracking info

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Minor
**Feature:** Version detail view
**Description:** When selecting a version that was created by a revert, the detail view should show "This version was created by reverting to Version X" below the timestamp. The badge shows in the list, but the detail view doesn't show this info.
**Expected:** Detail view shows revert source info
**Actual:** No revert info shown in detail view

### UAT-007: Current tab doesn't show revert info when created by revert

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Minor
**Feature:** Current version detail
**Description:** If the current prompt state was created by reverting to a previous version, there's no indication of this in the "Current" detail view.
**Expected:** Current detail view shows "Current state was restored from Version X"
**Actual:** No revert tracking info shown for Current

### UAT-008: Comparison mode buttons should be right-aligned

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Cosmetic
**Feature:** Modal header buttons
**Description:** The "Compare to Previous", "Compare to Current", and "Hide Diff" buttons are left-aligned in the modal header.
**Expected:** Buttons should be right-aligned for better visual balance
**Actual:** Buttons are left-aligned

### UAT-009: "Hide Diff" toggle doesn't apply to variables section

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Minor
**Feature:** Diff toggle
**Description:** When clicking "Hide Diff" button, the title and body diff highlighting disappears, but the variables section still shows the added/removed variable badges with green/red styling.
**Expected:** Hide Diff should hide ALL diff indicators including variable changes
**Actual:** Variable changes badges still visible when diff is hidden

### UAT-009: revertedFromVersionId not mapped from database to VersionListItem

**Discovered:** 2026-01-11
**Phase/Plan:** 7.1-03
**Severity:** Blocker
**Feature:** Revert tracking data flow
**Description:** The revert tracking badge shows in VersionListItem but the detail view doesn't show it. Investigation needed to determine if revertedFromVersionId is being properly fetched and passed through the component hierarchy.
**Expected:** revertedFromVersionId available in both list item and detail view
**Actual:** Only works in list item (via versionNumberMap), not in modal detail view

## Root Cause Analysis

The fundamental issue is the conceptual model of "Current" vs "Versions":

1. **Versions** are snapshots of the OLD state before each edit
2. **Current** is the live prompt state
3. When there's only Version 1 and no unsaved edits, Current = Version 1 content

The UI treats these as separate entities when they may represent the same content. This causes:
- Double-counting in version totals
- Meaningless diff comparisons
- Confusing "Revert" option on the version you're already viewing
- "Compare to Previous" for Version 1 which has no previous

## Resolved Issues

[None yet]

---

*Phase: 7.1-version-history-ui-enhancements*
*Plan: 03*
*Tested: 2026-01-11*
