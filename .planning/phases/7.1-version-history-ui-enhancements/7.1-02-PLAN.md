---
phase: 7.1-version-history-ui-enhancements
plan: 02
type: execute
---

<objective>
Improve version history modal UX with layout flip (history right, detail left) and diff highlighting toggle.

Purpose: Better visual hierarchy with prompt content on the left (primary focus) and history list on the right (navigation), plus ability to view clean text without diff markup.
Output: Reordered modal layout and functional diff toggle button.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-diff-display-modal/06-02-SUMMARY.md

**Key files:**
@src/components/version-history/VersionHistoryModal.tsx
@src/components/version-history/VersionDiff.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Flip modal layout (detail left, history right)</name>
  <files>src/components/version-history/VersionHistoryModal.tsx</files>
  <action>
In VersionHistoryModal.tsx, reorder the two-column grid:
1. Move the detail view (right column) to be the FIRST child in the grid
2. Move the version list (left column) to be the SECOND child
3. Update grid column sizing: detail gets 2/3 width (col-span-2), list gets 1/3
4. Adjust border: move border-l to border-r on the version list column
5. Adjust padding: pl-4 on list, pr-2 on detail (swap from current)

Current order: [VersionList | Detail]
New order: [Detail | VersionList]

The responsive stacking order should also change: on mobile, show detail first, then list below.
  </action>
  <verify>
- Build passes: `npm run build`
- Visual inspection: Detail view appears on left, version list on right
  </verify>
  <done>Modal layout flipped with detail on left (2/3 width) and history list on right (1/3 width)</done>
</task>

<task type="auto">
  <name>Task 2: Add diff highlighting toggle</name>
  <files>src/components/version-history/VersionDiff.tsx, src/components/version-history/VersionHistoryModal.tsx</files>
  <action>
1. Update VersionDiff component:
   - Add optional `showHighlighting?: boolean` prop (default: true)
   - When false, render newText without any diff highlighting (plain text)
   - When true, render with current diff highlighting behavior

2. Update VersionHistoryModal:
   - Add `showDiffHighlighting` state (default: true)
   - Add toggle button in the header area near comparison mode buttons
   - Use Eye/EyeOff icons from lucide-react
   - Button label: "Show Diff" / "Hide Diff" based on state
   - Pass showDiffHighlighting to all VersionDiff instances

Toggle button styling:
- Use outline variant, size sm
- Place after comparison mode toggle buttons
- Include aria-pressed for accessibility
  </action>
  <verify>
- Build passes: `npm run build`
- Lint passes: `npm run lint`
- Toggle button appears and switches between showing/hiding diff colors
  </verify>
  <done>Diff toggle button functional, VersionDiff respects showHighlighting prop</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Layout is flipped: detail left, history right
- [ ] Diff toggle button visible in modal header
- [ ] Toggle hides/shows diff highlighting
- [ ] Responsive layout still works (stacks on mobile)
- [ ] `npm run build` passes
- [ ] `npm run lint` passes
</verification>

<success_criteria>
- Modal layout reordered with detail on left, history on right
- Diff toggle button functional
- Toggle state persists during modal session
- All builds and lints pass
</success_criteria>

<output>
After completion, create `.planning/phases/7.1-version-history-ui-enhancements/7.1-02-SUMMARY.md`
</output>
